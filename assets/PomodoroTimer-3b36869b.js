import{f as D,t as k,g as f,_ as R,r as S,h as V,o as b,i as C,j as N,a as T,c as h,b as _,k as c,l as d,m as A,n as P,q as B,s as L,x as W}from"./index-f508a097.js";/*!
  * vue-timer-hook v1.0.56
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */class v{static getTimeFromSeconds(s){const e=f(()=>Math.ceil(s.value)),t=f(()=>Math.floor(e.value/(60*60*24))),i=f(()=>Math.floor(e.value%(60*60*24)/(60*60))),o=f(()=>Math.floor(e.value%(60*60)/60));return{seconds:f(()=>Math.floor(e.value%60)),minutes:o,hours:i,days:t}}static getSecondsFromExpiry(s,e){const t=new Date().getTime(),i=s-t;if(i>0){const o=i/1e3;return e?Math.round(o):o}return 0}static getSecondsFromPrevTime(s,e){const i=new Date().getTime()-s;if(i>0){const o=i/1e3;return e?Math.round(o):o}return 0}static getSecondsFromTimeNow(){const s=new Date,e=s.getTime(),t=s.getTimezoneOffset()*60;return e/1e3-t}static getFormattedTimeFromSeconds(s,e){const{seconds:t,minutes:i,hours:o}=v.getTimeFromSeconds(s),l=f(()=>e==="12-hour"?o.value>=12?"pm":"am":""),n=f(()=>e==="12-hour"?o.value%12:o.value);return{seconds:t,minutes:i,hours:n,ampm:l}}}class z{static expiryTimestamp(s){const e=new Date(s).getTime()>0;return e||console.warn("vue-timer-hook: { useTimer } Invalid expiryTimestamp settings",s),e}}const O=r=>typeof r=="number";function j(r,s){let e;const t=()=>{e&&(clearInterval(e),e=void 0)},i=o=>(t(),!o&&!s?void 0:e=setInterval(r,o||s));return O(s)&&i(),{remove:t,start:i}}const x=1e3;function M(r){if(!z.expiryTimestamp(r))return null;const s=v.getSecondsFromExpiry(r),e=Math.floor((s-Math.floor(s))*1e3);return e>0?e:x}const q=(r=60,s=!0)=>{let e;const t=D({expiryTimestamp:r,seconds:v.getSecondsFromExpiry(r),isRunning:s,isExpired:!1,didStart:s,delay:M(r)});function i(){t.isExpired=!0,t.isRunning=!1,t.delay=null,e&&e.remove()}function o(){t.isRunning=!1,e&&e.remove()}function l(u=r,g=!0){o(),t.delay=M(u),t.didStart=g,t.isExpired=!1,t.expiryTimestamp=u,t.seconds=v.getSecondsFromExpiry(u),t.didStart&&p()}function n(){const u=new Date,g=u.setMilliseconds(u.getMilliseconds()+t.seconds*1e3);l(g)}function p(){t.didStart?(t.seconds=v.getSecondsFromExpiry(t.expiryTimestamp),t.isRunning=!0,e=j(()=>{t.delay!==x&&(t.delay=x);const u=v.getSecondsFromExpiry(t.expiryTimestamp);t.seconds=u,u<=0&&i()},t.isRunning?t.delay:null)):n()}return l(r,s),{...v.getTimeFromSeconds(k(t,"seconds")),start:p,pause:o,resume:n,restart:l,isRunning:k(t,"isRunning"),isExpired:k(t,"isExpired")}};const H={class:"timer__container"},J={class:"timer__box"},U={key:0,class:"timer__title"},Y={key:1,class:"timer__clock"},$={key:2,class:"timer__clock"},G={class:"timer__row"},K={__name:"PomodoroTimer",setup(r){let s=S(!0),e=S(!0);var t=new Audio("audio/megumin.mp3"),i=new Audio("audio/yo.mp3");let o,l,n;const p=()=>{s.value?F():E()};function u(){e.value?(e.value=!e.value,localStorage.setItem("isWork",e.value),y(l.value)):(e.value=!e.value,localStorage.setItem("isWork",e.value),y(o.value))}V(()=>{let a=new Date;e.value=JSON.parse(localStorage.getItem("isWork")),o=S(localStorage.getItem("workTime")),l=S(localStorage.getItem("restTime"));let m=localStorage.getItem("seconds")?localStorage.getItem("seconds"):o.value*60;a.setSeconds(a.getSeconds()+parseInt(m)),n=q(a)}),b(()=>{C(async()=>{n.isExpired.value&&(e.value?t.play():i.play(),u())})});function g(){var a="";return n.minutes.value===0?a="00":n.minutes.value<10?a="0"+n.minutes.value:a=n.minutes.value,a}function w(){var a="";n.seconds.value===0?a="00":n.seconds.value<10?a="0"+n.seconds.value:a=n.seconds.value;const m=n.minutes.value*60+n.seconds.value;return localStorage.setItem("seconds",m),a}function y(a){const m=new Date;m.setSeconds(m.getSeconds()+a*60),s.value=!0,n.restart(m)}function E(){s.value=!s.value,n.resume()}function F(){s.value=!s.value,n.pause()}return(a,m)=>{const I=N("RouterLink");return T(),h("div",{class:L(["timer",{"blue-bg":c(e)},{"green-bg":!c(e)}])},[_("div",H,[_("div",J,[c(e)?(T(),h("div",U,d(c(e)?"work":"rest"),1)):A("",!0),c(e)?(T(),h("div",Y,d(c(o)>=60?c(n).hours.value+":":"")+d(g())+":"+d(w()),1)):(T(),h("div",$,d(c(l)>=60?c(n).hours.value+":":"")+d(g())+":"+d(w()),1))]),_("ul",G,[_("li",{class:"timer__el",onClick:m[0]||(m[0]=Q=>y(c(e)?c(o):c(l)))},"reset"),_("li",{onClick:p,class:"timer__el"},d(c(s)?"stop":"resume"),1),_("li",{class:"timer__el",onClick:u},d(c(e)?"go rest":"go work"),1)]),P(I,{to:{name:"Home"},id:"change-timer",class:"timer__primary-btn"},{default:B(()=>[W("change timer")]),_:1})])],2)}}},Z=R(K,[["__scopeId","data-v-41066f0a"]]);export{Z as default};
